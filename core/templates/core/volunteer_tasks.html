{% extends 'core/base.html' %}
{% block content %}
<div class="container mt-5">
  <h3 class="mb-4">ğŸ“ Pickup & Delivery Tasks</h3>

  <!-- AVAILABLE TASKS -->
 <h3>Available Tasks</h3>

{% if available_tasks %}
  <ul>
    {% for task in available_tasks %}
      <li>
        <strong>{{ task.title }}</strong><br>
        Pickup: {{ task.pickup_address }}<br>
        Drop: {{ task.drop_address }}<br>

        <a href="{% url 'accept_task' task.id %}">Accept Task</a>
      </li>
      <hr>
    {% endfor %}
  </ul>
{% else %}
  <p>No available tasks.</p>
{% endif %}

 <h3>My Assigned Tasks</h3>

{% if my_tasks %}
  <ul>
    {% for task in my_tasks %}
      <li>
        <strong>{{ task.title }}</strong><br>
        Pickup: {{ task.pickup_address }}<br>
        Drop: {{ task.drop_address }}<br>
        Status: {{ task.status }}<br>

        {% if task.status != 'completed' %}
          <a href="{% url 'complete_task' task.id %}">Mark as Completed</a>
        {% endif %}
      </li>
      <hr>
    {% endfor %}
  </ul>
{% else %}
  <p>No tasks assigned to you.</p>
{% endif %}
</div>
{% endblock %}
